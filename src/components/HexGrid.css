.hex-grid {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 1rem auto;
  padding: 0.5rem;
  touch-action: manipulation;
  width: 100%;
  box-sizing: border-box;
  overflow-x: visible; /* Allow grid to overflow horizontally if needed */
  -webkit-overflow-scrolling: touch;
  position: relative; /* For positioning context */
}

.hex-row {
  display: flex;
  margin-top: -0.85rem; /* Adjusted from -1.32rem as requested */
}

.hex-row-even {
  margin-left: 3.5rem; /* Adjusted from 3rem to match new cell width */
}

.hex-row:first-child {
  margin-top: 0; /* First row doesn't need negative margin */
}

.hex-cell-container {
  width: 3.5rem;  /* Increased from 3rem */
  height: 4.04rem; /* Increased proportionally (width * âˆš3)/2 * 2 for regular hexagon */
  cursor: pointer;
  touch-action: none; /* Disables browser handling of all panning and zooming gestures */
  -webkit-tap-highlight-color: transparent; /* Removes the highlight overlay when tapping */
}

.hex-cell {
  width: 100%;
  height: 100%;
  transition: all 0.2s ease;
}

/* SVG-based implementation */
.hex-grid-container {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 1rem auto;
  position: relative;
  overflow: hidden;
}

.hex-grid-svg {
  display: block;
  touch-action: none;
  -webkit-tap-highlight-color: transparent;
  max-height: 80vh;
}

/* Style for individual hexagons */
.hex-cell-svg {
  transition: stroke 0.2s ease;
  cursor: pointer;
  transform-origin: center;
  transform-box: fill-box;
}

/* Media query for mobile devices */
@media (max-width: 768px) {
  .hex-grid {
    padding: 0.25rem;
    margin: 0.5rem auto;
    /* Add horizontal centering for small screens */
    max-width: 95vw;
    transform: scale(0.95);
    transform-origin: center top;
  }
  
  .hex-cell-container {
    width: 2.8rem; /* Smaller cell size on mobile */
    height: 3.23rem; /* Proportionally smaller */
  }
  
  .hex-row-even {
    margin-left: 2.8rem; /* Adjusted for smaller cells */
  }
  
  .hex-row {
    margin-top: -0.68rem; /* Adjusted for smaller cells */
  }
  
  /* Disable hover effect on touch devices */
  .hex-cell:hover {
    transform: none;
  }

  .hex-grid-container {
    margin: 0.5rem auto;
    max-width: 95vw;
  }
  
  .hex-grid-svg {
    max-height: 70vh;
  }
}

/* Very small screens */
@media (max-width: 480px) {
  .hex-grid {
    padding: 0.25rem;
    margin: 0.25rem auto;
    transform: scale(0.85);
    transform-origin: center top;
    /* Ensure the grid doesn't get cut off */
    max-width: 90vw;
  }
  
  .hex-cell-container {
    width: 2.2rem; /* Even smaller for very small screens */
    height: 2.54rem;
  }
  
  .hex-row-even {
    margin-left: 2.2rem;
  }
  
  .hex-row {
    margin-top: -0.53rem;
  }

  .hex-grid-container {
    margin: 0.25rem auto;
    max-width: 90vw;
  }
  
  .hex-grid-svg {
    max-height: 60vh;
  }
}

/* iPhone SE and other very small devices */
@media (max-width: 375px) {
  .hex-grid {
    transform: scale(0.75); /* More aggressive scaling for very small screens */
    max-width: 100%; /* Allow full width */
    margin: 0 auto; /* Center the grid */
  }
  
  .hex-cell-container {
    width: 2rem;
    height: 2.31rem;
  }
  
  .hex-row-even {
    margin-left: 2rem;
  }
  
  .hex-row {
    margin-top: -0.48rem;
  }

  .hex-grid-container {
    margin: 0 auto;
    max-width: 100%;
  }
  
  .hex-grid-svg {
    max-height: 50vh;
  }
}